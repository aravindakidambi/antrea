namespace: changeme

namePrefix: antrea-multicluster-

bases:
  - ../../default

configMapGenerator:
  - behavior: merge
    name: manager-config
    files:
      - controller_manager_config.yaml

configurations:
  - kustomizeconfig.yaml

# mcs controller in leader cluster runs in the scope of a single namespace.
# convert the below cluster-role from base to role and cluster-role-binding
# to role-binding
patchesJson6902:
  - patch: |-
      - op: replace
        path: /kind
        value: RoleBinding
      - op: add
        path: /metadata/namespace
        value: changeme
      - op: replace
        path: /roleRef/kind
        value: Role
    target:
      group: rbac.authorization.k8s.io
      kind: ClusterRoleBinding
      name: controller-rolebinding
      version: v1
  - patch: |-
      - op: replace
        path: /kind
        value: Role
      - op: add
        path: /metadata/namespace
        value: changeme
    target:
      group: rbac.authorization.k8s.io
      kind: ClusterRole
      name: controller-role
      version: v1

resources:
  - webhook_rbac.yaml
  - member_cluster_rbac.yaml
